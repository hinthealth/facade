(function(){function n(n,e,t){t=(t||0)-1;for(var r=n?n.length:0;++t<r;)if(n[t]===e)return t;return-1}function e(e,t){var r=typeof t;if(e=e.l,"boolean"==r||null==t)return e[t]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?t:y+t;return e=(e=e[r])&&e[u],"object"==r?e&&-1<n(e,t)?0:-1:e?0:-1}function t(n){var e=this.l,t=typeof n;if("boolean"==t||null==n)e[n]=!0;else{"number"!=t&&"string"!=t&&(t="object");var r="number"==t?n:y+n,e=e[t]||(e[t]={});"object"==t?(e[r]||(e[r]=[])).push(n):e[r]=!0}}function r(n){return n.charCodeAt(0)}function u(n,e){for(var t=n.m,r=e.m,u=-1,o=t.length;++u<o;){var a=t[u],i=r[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.n-e.n}function o(n){var e=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;for(u=f(),u["false"]=u["null"]=u["true"]=u.undefined=!1,o=f(),o.k=n,o.l=u,o.push=t;++e<r;)o.push(n[e]);return o}function a(n){return"\\"+Y[n]}function i(){return v.pop()||[]}function f(){return g.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function c(n){n.length=0,v.length<b&&v.push(n)}function l(n){var e=n.l;e&&l(e),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,g.length<b&&g.push(n)}function p(n,e,t){e||(e=0),"undefined"==typeof t&&(t=n?n.length:0);var r=-1;t=t-e||0;for(var u=Array(0>t?0:t);++r<t;)u[r]=n[e+r];return u}function s(t){function v(n,e,t){if(!n||!G[typeof n])return n;e=e&&"undefined"==typeof t?e:ee(e,t,3);for(var r=-1,u=G[typeof n]&&$t(n),o=u?u.length:0;++r<o&&(t=u[r],!1!==e(n[t],t,n)););return n}function g(n,e,t){var r;if(!n||!G[typeof n])return n;e=e&&"undefined"==typeof t?e:ee(e,t,3);for(r in n)if(!1===e(n[r],r,n))break;return n}function b(n,e,t){var r,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof t?2:a.length;++i<f;)if((u=a[i])&&G[typeof u])for(var c=-1,l=G[typeof u]&&$t(u),p=l?l.length:0;++c<p;)r=l[c],"undefined"==typeof o[r]&&(o[r]=u[r]);return o}function Y(n,e,t){var r,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof t?2:a.length;if(f>3&&"function"==typeof a[f-2])var c=ee(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(c=a[--f]);for(;++i<f;)if((u=a[i])&&G[typeof u])for(var l=-1,p=G[typeof u]&&$t(u),s=p?p.length:0;++l<s;)r=p[l],o[r]=c?c(o[r],u[r]):u[r];return o}function U(n){var e,t=[];if(!n||!G[typeof n])return t;for(e in n)yt.call(n,e)&&t.push(e);return t}function V(n){return n&&"object"==typeof n&&!Rt(n)&&yt.call(n,"__wrapped__")?n:new H(n)}function H(n,e){this.__chain__=!!e,this.__wrapped__=n}function Q(n){function e(){if(r){var n=p(r);mt.apply(n,arguments)}if(this instanceof e){var o=ne(t.prototype),n=t.apply(o,n||arguments);return we(n)?n:o}return t.apply(u,n||arguments)}var t=n[0],r=n[2],u=n[4];return Dt(e,n),e}function Z(n,e,t,r,u){if(t){var o=t(n);if("undefined"!=typeof o)return o}if(!we(n))return n;var a=lt.call(n);if(!J[a])return n;var f=At[a];switch(a){case R:case $:return new f(+n);case K:case q:return new f(n);case z:return o=f(n.source,x.exec(n)),o.lastIndex=n.lastIndex,o}if(a=Rt(n),e){var l=!r;r||(r=i()),u||(u=i());for(var s=r.length;s--;)if(r[s]==n)return u[s];o=a?f(n.length):{}}else o=a?p(n):Y({},n);return a&&(yt.call(n,"index")&&(o.index=n.index),yt.call(n,"input")&&(o.input=n.input)),e?(r.push(n),u.push(o),(a?Be:v)(n,function(n,a){o[a]=Z(n,e,t,r,u)}),l&&(c(r),c(u)),o):o}function ne(n){return we(n)?jt(n):{}}function ee(n,e,t){if("function"!=typeof n)return Ye;if("undefined"==typeof e||!("prototype"in n))return n;var r=n.__bindData__;if("undefined"==typeof r&&(It.funcNames&&(r=!n.name),r=r||!It.funcDecomp,!r)){var u=gt.call(n);It.funcNames||(r=!C.test(u)),r||(r=S.test(u),Dt(n,r))}if(!1===r||!0!==r&&1&r[1])return n;switch(t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,r){return n.call(e,t,r)};case 3:return function(t,r,u){return n.call(e,t,r,u)};case 4:return function(t,r,u,o){return n.call(e,t,r,u,o)}}return Le(n,e)}function te(n){function e(){var n=f?a:this;if(u){var v=p(u);mt.apply(v,arguments)}return(o||l)&&(v||(v=p(arguments)),o&&mt.apply(v,o),l&&v.length<i)?(r|=16,te([t,s?r:-4&r,v,null,a,i])):(v||(v=arguments),c&&(t=n[h]),this instanceof e?(n=ne(t.prototype),v=t.apply(n,v),we(v)?v:n):t.apply(n,v))}var t=n[0],r=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&r,c=2&r,l=4&r,s=8&r,h=t;return Dt(e,n),e}function re(t,r){var u=-1,a=se(),i=t?t.length:0,f=i>=m&&a===n,c=[];if(f){var p=o(r);p?(a=e,r=p):f=!1}for(;++u<i;)p=t[u],0>a(r,p)&&c.push(p);return f&&l(r),c}function ue(n,e,t,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){var a=n[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Rt(a)||de(a))){e||(a=ue(a,e,t));var i=-1,f=a.length,c=o.length;for(o.length+=f;++i<f;)o[c++]=a[i]}else t||o.push(a)}return o}function oe(n,e,t,r,u,o){if(t){var a=t(n,e);if("undefined"!=typeof a)return!!a}if(n===e)return 0!==n||1/n==1/e;if(n===n&&!(n&&G[typeof n]||e&&G[typeof e]))return!1;if(null==n||null==e)return n===e;var f=lt.call(n),l=lt.call(e);if(f==I&&(f=P),l==I&&(l=P),f!=l)return!1;switch(f){case R:case $:return+n==+e;case K:return n!=+n?e!=+e:0==n?1/n==1/e:n==+e;case z:case q:return n==ot(e)}if(l=f==D,!l){var p=yt.call(n,"__wrapped__"),s=yt.call(e,"__wrapped__");if(p||s)return oe(p?n.__wrapped__:n,s?e.__wrapped__:e,t,r,u,o);if(f!=P)return!1;if(f=n.constructor,p=e.constructor,f!=p&&!(_e(f)&&f instanceof f&&_e(p)&&p instanceof p)&&"constructor"in n&&"constructor"in e)return!1}for(f=!u,u||(u=i()),o||(o=i()),p=u.length;p--;)if(u[p]==n)return o[p]==e;var h=0,a=!0;if(u.push(n),o.push(e),l){if(p=n.length,h=e.length,(a=h==p)||r)for(;h--;)if(l=p,s=e[h],r)for(;l--&&!(a=oe(n[l],s,t,r,u,o)););else if(!(a=oe(n[h],s,t,r,u,o)))break}else g(e,function(e,i,f){return yt.call(f,i)?(h++,a=yt.call(n,i)&&oe(n[i],e,t,r,u,o)):void 0}),a&&!r&&g(n,function(n,e,t){return yt.call(t,e)?a=-1<--h:void 0});return u.pop(),o.pop(),f&&(c(u),c(o)),a}function ae(n,e,t,r,u){(Rt(e)?Be:v)(e,function(e,o){var a,i,f=e,c=n[o];if(e&&((i=Rt(e))||qt(e))){for(f=r.length;f--;)if(a=r[f]==e){c=u[f];break}if(!a){var l;t&&(f=t(c,e),l="undefined"!=typeof f)&&(c=f),l||(c=i?Rt(c)?c:[]:qt(c)?c:{}),r.push(e),u.push(c),l||ae(c,e,t,r,u)}}else t&&(f=t(c,e),"undefined"==typeof f&&(f=e)),"undefined"!=typeof f&&(c=f);n[o]=c})}function ie(n,e){return n+vt(Tt()*(e-n+1))}function fe(t,r,u){var a=-1,f=se(),p=t?t.length:0,s=[],h=!r&&p>=m&&f===n,v=u||h?i():s;for(h&&(v=o(v),f=e);++a<p;){var g=t[a],d=u?u(g,a,t):g;(r?!a||v[v.length-1]!==d:0>f(v,d))&&((u||h)&&v.push(d),s.push(g))}return h?(c(v.k),l(v)):u&&c(v),s}function ce(n){return function(e,t,r){var u={};t=V.createCallback(t,r,3),r=-1;var o=e?e.length:0;if("number"==typeof o)for(;++r<o;){var a=e[r];n(u,a,t(a,r,e),e)}else v(e,function(e,r,o){n(u,e,t(e,r,o),o)});return u}}function le(n,e,t,r,u,o){var a=1&e,i=4&e,f=16&e,c=32&e;if(!(2&e||_e(n)))throw new at;f&&!t.length&&(e&=-17,f=t=!1),c&&!r.length&&(e&=-33,c=r=!1);var l=n&&n.__bindData__;return l&&!0!==l?(l=p(l),l[2]&&(l[2]=p(l[2])),l[3]&&(l[3]=p(l[3])),!a||1&l[1]||(l[4]=u),!a&&1&l[1]&&(e|=8),!i||4&l[1]||(l[5]=o),f&&mt.apply(l[2]||(l[2]=[]),t),c&&wt.apply(l[3]||(l[3]=[]),r),l[1]|=e,le.apply(null,l)):(1==e||17===e?Q:te)([n,e,t,r,u,o])}function pe(n){return Ft[n]}function se(){var e=(e=V.indexOf)===Ke?n:e;return e}function he(n){return"function"==typeof n&&pt.test(n)}function ve(n){var e,t;return n&&lt.call(n)==P&&(e=n.constructor,!_e(e)||e instanceof e)?(g(n,function(n,e){t=e}),"undefined"==typeof t||yt.call(n,t)):!1}function ge(n){return Kt[n]}function de(n){return n&&"object"==typeof n&&"number"==typeof n.length&&lt.call(n)==I||!1}function ye(n,e,t){var r=$t(n),u=r.length;for(e=ee(e,t,3);u--&&(t=r[u],!1!==e(n[t],t,n)););return n}function me(n){var e=[];return g(n,function(n,t){_e(n)&&e.push(t)}),e.sort()}function be(n){for(var e=-1,t=$t(n),r=t.length,u={};++e<r;){var o=t[e];u[n[o]]=o}return u}function _e(n){return"function"==typeof n}function we(n){return!(!n||!G[typeof n])}function ke(n){return"number"==typeof n||n&&"object"==typeof n&&lt.call(n)==K||!1}function je(n){return"string"==typeof n||n&&"object"==typeof n&&lt.call(n)==q||!1}function Ne(n){for(var e=-1,t=$t(n),r=t.length,u=Qe(r);++e<r;)u[e]=n[t[e]];return u}function xe(n,e,t){var r=-1,u=se(),o=n?n.length:0,a=!1;return t=(0>t?Ot(0,o+t):t)||0,Rt(n)?a=-1<u(n,e,t):"number"==typeof o?a=-1<(je(n)?n.indexOf(e,t):u(n,e,t)):v(n,function(n){return++r<t?void 0:!(a=n===e)}),a}function Ce(n,e,t){var r=!0;e=V.createCallback(e,t,3),t=-1;var u=n?n.length:0;if("number"==typeof u)for(;++t<u&&(r=!!e(n[t],t,n)););else v(n,function(n,t,u){return r=!!e(n,t,u)});return r}function Ee(n,e,t){var r=[];e=V.createCallback(e,t,3),t=-1;var u=n?n.length:0;if("number"==typeof u)for(;++t<u;){var o=n[t];e(o,t,n)&&r.push(o)}else v(n,function(n,t,u){e(n,t,u)&&r.push(n)});return r}function Oe(n,e,t){e=V.createCallback(e,t,3),t=-1;var r=n?n.length:0;if("number"!=typeof r){var u;return v(n,function(n,t,r){return e(n,t,r)?(u=n,!1):void 0}),u}for(;++t<r;){var o=n[t];if(e(o,t,n))return o}}function Be(n,e,t){var r=-1,u=n?n.length:0;if(e=e&&"undefined"==typeof t?e:ee(e,t,3),"number"==typeof u)for(;++r<u&&!1!==e(n[r],r,n););else v(n,e);return n}function Se(n,e,t){var r=n?n.length:0;if(e=e&&"undefined"==typeof t?e:ee(e,t,3),"number"==typeof r)for(;r--&&!1!==e(n[r],r,n););else{var u=$t(n),r=u.length;v(n,function(n,t,o){return t=u?u[--r]:--r,e(o[t],t,o)})}return n}function Te(n,e,t){var r=-1,u=n?n.length:0;if(e=V.createCallback(e,t,3),"number"==typeof u)for(var o=Qe(u);++r<u;)o[r]=e(n[r],r,n);else o=[],v(n,function(n,t,u){o[++r]=e(n,t,u)});return o}function Ae(n,e,t){var u=-1/0,o=u;if("function"!=typeof e&&t&&t[e]===n&&(e=null),null==e&&Rt(n)){t=-1;for(var a=n.length;++t<a;){var i=n[t];i>o&&(o=i)}}else e=null==e&&je(n)?r:V.createCallback(e,t,3),Be(n,function(n,t,r){t=e(n,t,r),t>u&&(u=t,o=n)});return o}function Ie(n,e,t,r){if(!n)return t;var u=3>arguments.length;e=V.createCallback(e,r,4);var o=-1,a=n.length;if("number"==typeof a)for(u&&(t=n[++o]);++o<a;)t=e(t,n[o],o,n);else v(n,function(n,r,o){t=u?(u=!1,n):e(t,n,r,o)});return t}function De(n,e,t,r){var u=3>arguments.length;return e=V.createCallback(e,r,4),Se(n,function(n,r,o){t=u?(u=!1,n):e(t,n,r,o)}),t}function Re(n){var e=-1,t=n?n.length:0,r=Qe("number"==typeof t?t:0);return Be(n,function(n){var t=ie(0,++e);r[e]=r[t],r[t]=n}),r}function $e(n,e,t){var r;e=V.createCallback(e,t,3),t=-1;var u=n?n.length:0;if("number"==typeof u)for(;++t<u&&!(r=e(n[t],t,n)););else v(n,function(n,t,u){return!(r=e(n,t,u))});return!!r}function Fe(n,e,t){var r=0,u=n?n.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=V.createCallback(e,t,3);++o<u&&e(n[o],o,n);)r++}else if(r=e,null==r||t)return n?n[0]:h;return p(n,0,Bt(Ot(0,r),u))}function Ke(e,t,r){if("number"==typeof r){var u=e?e.length:0;r=0>r?Ot(0,u+r):r||0}else if(r)return r=ze(e,t),e[r]===t?r:-1;return n(e,t,r)}function Pe(n,e,t){if("number"!=typeof e&&null!=e){var r=0,u=-1,o=n?n.length:0;for(e=V.createCallback(e,t,3);++u<o&&e(n[u],u,n);)r++}else r=null==e||t?1:Ot(0,e);return p(n,r)}function ze(n,e,t,r){var u=0,o=n?n.length:u;for(t=t?V.createCallback(t,r,1):Ye,e=t(e);o>u;)r=u+o>>>1,t(n[r])<e?u=r+1:o=r;return u}function qe(n,e,t,r){return"boolean"!=typeof e&&null!=e&&(r=t,t="function"!=typeof e&&r&&r[e]===n?null:e,e=!1),null!=t&&(t=V.createCallback(t,r,3)),fe(n,e,t)}function Je(){for(var n=1<arguments.length?arguments:arguments[0],e=-1,t=n?Ae(Gt(n,"length")):0,r=Qe(0>t?0:t);++e<t;)r[e]=Gt(n,e);return r}function We(n,e){var t=-1,r=n?n.length:0,u={};for(e||!r||Rt(n[0])||(e=[]);++t<r;){var o=n[t];e?u[o]=e[t]:o&&(u[o[0]]=o[1])}return u}function Le(n,e){return 2<arguments.length?le(n,17,p(arguments,2),null,e):le(n,1,null,null,e)}function Ge(n,e,t){function r(){l&&ht(l),a=l=p=h,(g||v!==e)&&(s=Yt(),i=n.apply(c,o),l||a||(o=c=null))}function u(){var t=e-(Yt()-f);t>0?l=bt(u,t):(a&&ht(a),t=p,a=l=p=h,t&&(s=Yt(),i=n.apply(c,o),l||a||(o=c=null)))}var o,a,i,f,c,l,p,s=0,v=!1,g=!0;if(!_e(n))throw new at;if(e=Ot(0,e)||0,!0===t)var d=!0,g=!1;else we(t)&&(d=t.leading,v="maxWait"in t&&(Ot(e,t.maxWait)||0),g="trailing"in t?t.trailing:g);return function(){if(o=arguments,f=Yt(),c=this,p=g&&(l||!d),!1===v)var t=d&&!l;else{a||d||(s=f);var h=v-(f-s),y=0>=h;y?(a&&(a=ht(a)),s=f,i=n.apply(c,o)):a||(a=bt(r,h))}return y&&l?l=ht(l):l||e===v||(l=bt(u,e)),t&&(y=!0,i=n.apply(c,o)),!y||l||a||(o=c=null),i}}function Ye(n){return n}function Me(n,e,t){var r=!0,u=e&&me(e);e&&(t||u.length)||(null==t&&(t=e),o=H,e=n,n=V,u=me(e)),!1===t?r=!1:we(t)&&"chain"in t&&(r=t.chain);var o=n,a=_e(o);Be(u,function(t){var u=n[t]=e[t];a&&(o.prototype[t]=function(){var e=this.__chain__,t=this.__wrapped__,a=[t];if(mt.apply(a,arguments),a=u.apply(n,a),r||e){if(t===a&&we(a))return this;a=new o(a),a.__chain__=e}return a})})}function Ue(){}function Ve(n){return function(e){return e[n]}}function He(){return this.__wrapped__}t=t?X.defaults(M.Object(),t,X.pick(M,A)):M;var Qe=t.Array,Xe=t.Boolean,Ze=t.Date,nt=t.Function,et=t.Math,tt=t.Number,rt=t.Object,ut=t.RegExp,ot=t.String,at=t.TypeError,it=[],ft=rt.prototype,ct=t._,lt=ft.toString,pt=ut("^"+ot(lt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),st=et.ceil,ht=t.clearTimeout,vt=et.floor,gt=nt.prototype.toString,dt=he(dt=rt.getPrototypeOf)&&dt,yt=ft.hasOwnProperty,mt=it.push,bt=t.setTimeout,_t=it.splice,wt=it.unshift,kt=function(){try{var n={},e=he(e=rt.defineProperty)&&e,t=e(n,n,n)&&e}catch(r){}return t}(),jt=he(jt=rt.create)&&jt,Nt=he(Nt=Qe.isArray)&&Nt,xt=t.isFinite,Ct=t.isNaN,Et=he(Et=rt.keys)&&Et,Ot=et.max,Bt=et.min,St=t.parseInt,Tt=et.random,At={};At[D]=Qe,At[R]=Xe,At[$]=Ze,At[F]=nt,At[P]=rt,At[K]=tt,At[z]=ut,At[q]=ot,H.prototype=V.prototype;var It=V.support={};It.funcDecomp=!he(t.a)&&S.test(s),It.funcNames="string"==typeof nt.name,V.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:E,variable:"",imports:{_:V}},jt||(ne=function(){function n(){}return function(e){if(we(e)){n.prototype=e;var r=new n;n.prototype=null}return r||t.Object()}}());var Dt=kt?function(n,e){L.value=e,kt(n,"__bindData__",L)}:Ue,Rt=Nt||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&lt.call(n)==D||!1},$t=Et?function(n){return we(n)?Et(n):[]}:U,Ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kt=be(Ft),Pt=ut("("+$t(Kt).join("|")+")","g"),zt=ut("["+$t(Ft).join("")+"]","g"),qt=dt?function(n){if(!n||lt.call(n)!=P)return!1;var e=n.valueOf,t=he(e)&&(t=dt(e))&&dt(t);return t?n==t||dt(n)==t:ve(n)}:ve,Jt=ce(function(n,e,t){yt.call(n,t)?n[t]++:n[t]=1}),Wt=ce(function(n,e,t){(yt.call(n,t)?n[t]:n[t]=[]).push(e)}),Lt=ce(function(n,e,t){n[t]=e}),Gt=Te,Yt=he(Yt=Ze.now)&&Yt||function(){return(new Ze).getTime()},Mt=8==St(_+"08")?St:function(n,e){return St(je(n)?n.replace(O,""):n,e||0)};return V.after=function(n,e){if(!_e(e))throw new at;return function(){return 1>--n?e.apply(this,arguments):void 0}},V.assign=Y,V.at=function(n){for(var e=arguments,t=-1,r=ue(e,!0,!1,1),e=e[2]&&e[2][e[1]]===n?1:r.length,u=Qe(e);++t<e;)u[t]=n[r[t]];return u},V.bind=Le,V.bindAll=function(n){for(var e=1<arguments.length?ue(arguments,!0,!1,1):me(n),t=-1,r=e.length;++t<r;){var u=e[t];n[u]=le(n[u],1,null,null,n)}return n},V.bindKey=function(n,e){return 2<arguments.length?le(e,19,p(arguments,2),null,n):le(e,3,null,null,n)},V.chain=function(n){return n=new H(n),n.__chain__=!0,n},V.compact=function(n){for(var e=-1,t=n?n.length:0,r=[];++e<t;){var u=n[e];u&&r.push(u)}return r},V.compose=function(){for(var n=arguments,e=n.length;e--;)if(!_e(n[e]))throw new at;return function(){for(var e=arguments,t=n.length;t--;)e=[n[t].apply(this,e)];return e[0]}},V.constant=function(n){return function(){return n}},V.countBy=Jt,V.create=function(n,e){var t=ne(n);return e?Y(t,e):t},V.createCallback=function(n,e,t){var r=typeof n;if(null==n||"function"==r)return ee(n,e,t);if("object"!=r)return Ve(n);var u=$t(n),o=u[0],a=n[o];return 1!=u.length||a!==a||we(a)?function(e){for(var t=u.length,r=!1;t--&&(r=oe(e[u[t]],n[u[t]],null,!0)););return r}:function(n){return n=n[o],a===n&&(0!==a||1/a==1/n)}},V.curry=function(n,e){return e="number"==typeof e?e:+e||n.length,le(n,4,null,null,null,e)},V.debounce=Ge,V.defaults=b,V.defer=function(n){if(!_e(n))throw new at;var e=p(arguments,1);return bt(function(){n.apply(h,e)},1)},V.delay=function(n,e){if(!_e(n))throw new at;var t=p(arguments,2);return bt(function(){n.apply(h,t)},e)},V.difference=function(n){return re(n,ue(arguments,!0,!0,1))},V.filter=Ee,V.flatten=function(n,e,t,r){return"boolean"!=typeof e&&null!=e&&(r=t,t="function"!=typeof e&&r&&r[e]===n?null:e,e=!1),null!=t&&(n=Te(n,t,r)),ue(n,e)},V.forEach=Be,V.forEachRight=Se,V.forIn=g,V.forInRight=function(n,e,t){var r=[];g(n,function(n,e){r.push(e,n)});var u=r.length;for(e=ee(e,t,3);u--&&!1!==e(r[u--],r[u],n););return n},V.forOwn=v,V.forOwnRight=ye,V.functions=me,V.groupBy=Wt,V.indexBy=Lt,V.initial=function(n,e,t){var r=0,u=n?n.length:0;if("number"!=typeof e&&null!=e){var o=u;for(e=V.createCallback(e,t,3);o--&&e(n[o],o,n);)r++}else r=null==e||t?1:e||r;return p(n,0,Bt(Ot(0,u-r),u))},V.intersection=function(){for(var t=[],r=-1,u=arguments.length,a=i(),f=se(),p=f===n,s=i();++r<u;){var h=arguments[r];(Rt(h)||de(h))&&(t.push(h),a.push(p&&h.length>=m&&o(r?t[r]:s)))}var p=t[0],v=-1,g=p?p.length:0,d=[];n:for(;++v<g;){var y=a[0],h=p[v];if(0>(y?e(y,h):f(s,h))){for(r=u,(y||s).push(h);--r;)if(y=a[r],0>(y?e(y,h):f(t[r],h)))continue n;d.push(h)}}for(;u--;)(y=a[u])&&l(y);return c(a),c(s),d},V.invert=be,V.invoke=function(n,e){var t=p(arguments,2),r=-1,u="function"==typeof e,o=n?n.length:0,a=Qe("number"==typeof o?o:0);return Be(n,function(n){a[++r]=(u?e:n[e]).apply(n,t)}),a},V.keys=$t,V.map=Te,V.mapValues=function(n,e,t){var r={};return e=V.createCallback(e,t,3),v(n,function(n,t,u){r[t]=e(n,t,u)}),r},V.max=Ae,V.memoize=function(n,e){function t(){var r=t.cache,u=e?e.apply(this,arguments):y+arguments[0];return yt.call(r,u)?r[u]:r[u]=n.apply(this,arguments)}if(!_e(n))throw new at;return t.cache={},t},V.merge=function(n){var e=arguments,t=2;if(!we(n))return n;if("number"!=typeof e[2]&&(t=e.length),t>3&&"function"==typeof e[t-2])var r=ee(e[--t-1],e[t--],2);else t>2&&"function"==typeof e[t-1]&&(r=e[--t]);for(var e=p(arguments,1,t),u=-1,o=i(),a=i();++u<t;)ae(n,e[u],r,o,a);return c(o),c(a),n},V.min=function(n,e,t){var u=1/0,o=u;if("function"!=typeof e&&t&&t[e]===n&&(e=null),null==e&&Rt(n)){t=-1;for(var a=n.length;++t<a;){var i=n[t];o>i&&(o=i)}}else e=null==e&&je(n)?r:V.createCallback(e,t,3),Be(n,function(n,t,r){t=e(n,t,r),u>t&&(u=t,o=n)});return o},V.omit=function(n,e,t){var r={};if("function"!=typeof e){var u=[];g(n,function(n,e){u.push(e)});for(var u=re(u,ue(arguments,!0,!1,1)),o=-1,a=u.length;++o<a;){var i=u[o];r[i]=n[i]}}else e=V.createCallback(e,t,3),g(n,function(n,t,u){e(n,t,u)||(r[t]=n)});return r},V.once=function(n){var e,t;if(!_e(n))throw new at;return function(){return e?t:(e=!0,t=n.apply(this,arguments),n=null,t)}},V.pairs=function(n){for(var e=-1,t=$t(n),r=t.length,u=Qe(r);++e<r;){var o=t[e];u[e]=[o,n[o]]}return u},V.partial=function(n){return le(n,16,p(arguments,1))},V.partialRight=function(n){return le(n,32,null,p(arguments,1))},V.pick=function(n,e,t){var r={};if("function"!=typeof e)for(var u=-1,o=ue(arguments,!0,!1,1),a=we(n)?o.length:0;++u<a;){var i=o[u];i in n&&(r[i]=n[i])}else e=V.createCallback(e,t,3),g(n,function(n,t,u){e(n,t,u)&&(r[t]=n)});return r},V.pluck=Gt,V.property=Ve,V.pull=function(n){for(var e=arguments,t=0,r=e.length,u=n?n.length:0;++t<r;)for(var o=-1,a=e[t];++o<u;)n[o]===a&&(_t.call(n,o--,1),u--);return n},V.range=function(n,e,t){n=+n||0,t="number"==typeof t?t:+t||1,null==e&&(e=n,n=0);var r=-1;e=Ot(0,st((e-n)/(t||1)));for(var u=Qe(e);++r<e;)u[r]=n,n+=t;return u},V.reject=function(n,e,t){return e=V.createCallback(e,t,3),Ee(n,function(n,t,r){return!e(n,t,r)})},V.remove=function(n,e,t){var r=-1,u=n?n.length:0,o=[];for(e=V.createCallback(e,t,3);++r<u;)t=n[r],e(t,r,n)&&(o.push(t),_t.call(n,r--,1),u--);return o},V.rest=Pe,V.shuffle=Re,V.sortBy=function(n,e,t){var r=-1,o=Rt(e),a=n?n.length:0,p=Qe("number"==typeof a?a:0);for(o||(e=V.createCallback(e,t,3)),Be(n,function(n,t,u){var a=p[++r]=f();o?a.m=Te(e,function(e){return n[e]}):(a.m=i())[0]=e(n,t,u),a.n=r,a.o=n}),a=p.length,p.sort(u);a--;)n=p[a],p[a]=n.o,o||c(n.m),l(n);return p},V.tap=function(n,e){return e(n),n},V.throttle=function(n,e,t){var r=!0,u=!0;if(!_e(n))throw new at;return!1===t?r=!1:we(t)&&(r="leading"in t?t.leading:r,u="trailing"in t?t.trailing:u),W.leading=r,W.maxWait=e,W.trailing=u,Ge(n,e,W)},V.times=function(n,e,t){n=-1<(n=+n)?n:0;var r=-1,u=Qe(n);for(e=ee(e,t,1);++r<n;)u[r]=e(r);return u},V.toArray=function(n){return n&&"number"==typeof n.length?p(n):Ne(n)},V.transform=function(n,e,t,r){var u=Rt(n);if(null==t)if(u)t=[];else{var o=n&&n.constructor;t=ne(o&&o.prototype)}return e&&(e=V.createCallback(e,r,4),(u?Be:v)(n,function(n,r,u){return e(t,n,r,u)})),t},V.union=function(){return fe(ue(arguments,!0,!0))},V.uniq=qe,V.values=Ne,V.where=Ee,V.without=function(n){return re(n,p(arguments,1))},V.wrap=function(n,e){return le(e,16,[n])},V.xor=function(){for(var n=-1,e=arguments.length;++n<e;){var t=arguments[n];if(Rt(t)||de(t))var r=r?fe(re(r,t).concat(re(t,r))):t}return r||[]},V.zip=Je,V.zipObject=We,V.collect=Te,V.drop=Pe,V.each=Be,V.eachRight=Se,V.extend=Y,V.methods=me,V.object=We,V.select=Ee,V.tail=Pe,V.unique=qe,V.unzip=Je,Me(V),V.clone=function(n,e,t,r){return"boolean"!=typeof e&&null!=e&&(r=t,t=e,e=!1),Z(n,e,"function"==typeof t&&ee(t,r,1))},V.cloneDeep=function(n,e,t){return Z(n,!0,"function"==typeof e&&ee(e,t,1))},V.contains=xe,V.escape=function(n){return null==n?"":ot(n).replace(zt,pe)},V.every=Ce,V.find=Oe,V.findIndex=function(n,e,t){var r=-1,u=n?n.length:0;for(e=V.createCallback(e,t,3);++r<u;)if(e(n[r],r,n))return r;return-1},V.findKey=function(n,e,t){var r;return e=V.createCallback(e,t,3),v(n,function(n,t,u){return e(n,t,u)?(r=t,!1):void 0}),r},V.findLast=function(n,e,t){var r;return e=V.createCallback(e,t,3),Se(n,function(n,t,u){return e(n,t,u)?(r=n,!1):void 0}),r},V.findLastIndex=function(n,e,t){var r=n?n.length:0;for(e=V.createCallback(e,t,3);r--;)if(e(n[r],r,n))return r;return-1},V.findLastKey=function(n,e,t){var r;return e=V.createCallback(e,t,3),ye(n,function(n,t,u){return e(n,t,u)?(r=t,!1):void 0}),r},V.has=function(n,e){return n?yt.call(n,e):!1},V.identity=Ye,V.indexOf=Ke,V.isArguments=de,V.isArray=Rt,V.isBoolean=function(n){return!0===n||!1===n||n&&"object"==typeof n&&lt.call(n)==R||!1},V.isDate=function(n){return n&&"object"==typeof n&&lt.call(n)==$||!1},V.isElement=function(n){return n&&1===n.nodeType||!1},V.isEmpty=function(n){var e=!0;if(!n)return e;var t=lt.call(n),r=n.length;return t==D||t==q||t==I||t==P&&"number"==typeof r&&_e(n.splice)?!r:(v(n,function(){return e=!1}),e)},V.isEqual=function(n,e,t,r){return oe(n,e,"function"==typeof t&&ee(t,r,2))},V.isFinite=function(n){return xt(n)&&!Ct(parseFloat(n))},V.isFunction=_e,V.isNaN=function(n){return ke(n)&&n!=+n},V.isNull=function(n){return null===n},V.isNumber=ke,V.isObject=we,V.isPlainObject=qt,V.isRegExp=function(n){return n&&"object"==typeof n&&lt.call(n)==z||!1},V.isString=je,V.isUndefined=function(n){return"undefined"==typeof n},V.lastIndexOf=function(n,e,t){var r=n?n.length:0;for("number"==typeof t&&(r=(0>t?Ot(0,r+t):Bt(t,r-1))+1);r--;)if(n[r]===e)return r;return-1},V.mixin=Me,V.noConflict=function(){return t._=ct,this},V.noop=Ue,V.now=Yt,V.parseInt=Mt,V.random=function(n,e,t){var r=null==n,u=null==e;return null==t&&("boolean"==typeof n&&u?(t=n,n=1):u||"boolean"!=typeof e||(t=e,u=!0)),r&&u&&(e=1),n=+n||0,u?(e=n,n=0):e=+e||0,t||n%1||e%1?(t=Tt(),Bt(n+t*(e-n+parseFloat("1e-"+((t+"").length-1))),e)):ie(n,e)},V.reduce=Ie,V.reduceRight=De,V.result=function(n,e){if(n){var t=n[e];return _e(t)?n[e]():t}},V.runInContext=s,V.size=function(n){var e=n?n.length:0;return"number"==typeof e?e:$t(n).length},V.some=$e,V.sortedIndex=ze,V.template=function(n,e,t){var r=V.templateSettings;n=ot(n||""),t=b({},t,r);var u,o=b({},t.imports,r.imports),r=$t(o),o=Ne(o),i=0,f=t.interpolate||B,c="__p+='",f=ut((t.escape||B).source+"|"+f.source+"|"+(f===E?N:B).source+"|"+(t.evaluate||B).source+"|$","g");n.replace(f,function(e,t,r,o,f,l){return r||(r=o),c+=n.slice(i,l).replace(T,a),t&&(c+="'+__e("+t+")+'"),f&&(u=!0,c+="';"+f+";\n__p+='"),r&&(c+="'+((__t=("+r+"))==null?'':__t)+'"),i=l+e.length,e}),c+="';",f=t=t.variable,f||(t="obj",c="with("+t+"){"+c+"}"),c=(u?c.replace(w,""):c).replace(k,"$1").replace(j,"$1;"),c="function("+t+"){"+(f?"":t+"||("+t+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}";try{var l=nt(r,"return "+c).apply(h,o)}catch(p){throw p.source=c,p}return e?l(e):(l.source=c,l)},V.unescape=function(n){return null==n?"":ot(n).replace(Pt,ge)},V.uniqueId=function(n){var e=++d;return ot(null==n?"":n)+e},V.all=Ce,V.any=$e,V.detect=Oe,V.findWhere=Oe,V.foldl=Ie,V.foldr=De,V.include=xe,V.inject=Ie,Me(function(){var n={};return v(V,function(e,t){V.prototype[t]||(n[t]=e)}),n}(),!1),V.first=Fe,V.last=function(n,e,t){var r=0,u=n?n.length:0;if("number"!=typeof e&&null!=e){var o=u;for(e=V.createCallback(e,t,3);o--&&e(n[o],o,n);)r++}else if(r=e,null==r||t)return n?n[u-1]:h;return p(n,Ot(0,u-r))},V.sample=function(n,e,t){return n&&"number"!=typeof n.length&&(n=Ne(n)),null==e||t?n?n[ie(0,n.length-1)]:h:(n=Re(n),n.length=Bt(Ot(0,e),n.length),n)},V.take=Fe,V.head=Fe,v(V,function(n,e){var t="sample"!==e;V.prototype[e]||(V.prototype[e]=function(e,r){var u=this.__chain__,o=n(this.__wrapped__,e,r);return u||null!=e&&(!r||t&&"function"==typeof e)?new H(o,u):o})}),V.VERSION="2.4.1",V.prototype.chain=function(){return this.__chain__=!0,this},V.prototype.toString=function(){return ot(this.__wrapped__)},V.prototype.value=He,V.prototype.valueOf=He,Be(["join","pop","shift"],function(n){var e=it[n];V.prototype[n]=function(){var n=this.__chain__,t=e.apply(this.__wrapped__,arguments);return n?new H(t,n):t}}),Be(["push","reverse","sort","unshift"],function(n){var e=it[n];V.prototype[n]=function(){return e.apply(this.__wrapped__,arguments),this}}),Be(["concat","slice","splice"],function(n){var e=it[n];V.prototype[n]=function(){return new H(e.apply(this.__wrapped__,arguments),this.__chain__)}}),V}var h,v=[],g=[],d=0,y=+new Date+"",m=75,b=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",w=/\b__p\+='';/g,k=/\b(__p\+=)''\+/g,j=/(__e\(.*?\)|\b__t\))\+'';/g,N=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,x=/\w*$/,C=/^\s*function[ \n\r\t]+\w/,E=/<%=([\s\S]+?)%>/g,O=RegExp("^["+_+"]*0+(?=.$)"),B=/($^)/,S=/\bthis\b/,T=/['\n\r\t\u2028\u2029\\]/g,A="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),I="[object Arguments]",D="[object Array]",R="[object Boolean]",$="[object Date]",F="[object Function]",K="[object Number]",P="[object Object]",z="[object RegExp]",q="[object String]",J={};J[F]=!1,J[I]=J[D]=J[R]=J[$]=J[K]=J[P]=J[z]=J[q]=!0;var W={leading:!1,maxWait:0,trailing:!1},L={configurable:!1,enumerable:!1,value:null,writable:!1},G={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},M=G[typeof window]&&window||this,U=G[typeof exports]&&exports&&!exports.nodeType&&exports,V=G[typeof module]&&module&&!module.nodeType&&module,H=V&&V.exports===U&&U,Q=G[typeof global]&&global;!Q||Q.global!==Q&&Q.window!==Q||(M=Q);var X=s();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(M._=X,define(function(){return X})):U&&V?H?(V.exports=X)._=X:U._=X:M._=X}).call(this),function(){"use strict";function n(n){e(n),a(n)}function e(n){NachoBackend.backend.whenGET(n.url).respond(function(){return[200,f(n),{},"OK"]})}function t(n,e){NachoBackend.backend.whenGET(n.url+"/"+e).respond(function(){return[200,c(n,e),{},"OK"]})}function r(n,e){NachoBackend.backend.whenPUT(n.url+"/"+e).respond(function(t,r,u){u=u||{};var o=c(n,e);return _.assign(o,JSON.parse(u)),[200,o,{},"OK"]})}function u(n){NachoBackend.backend.whenPOST(n.url).respond(function(e,t,r){r=r||{};var u=n.add(JSON.parse(r));return[200,u,{},"OK"]})}function o(n,e){NachoBackend.backend.whenDELETE(n.url+"/"+e).respond(function(t,r,u){u=u||{};var o=i(n).delete(e);return[200,o,{},"OK"]})}function a(n){var e=[t,r,u,o],a=f(n);_.each(e,function(e){_.each(a,function(t){e(n,t.id)})})}function i(n){return d(n.name),NachoBackend.db[n.name]}function f(n){return i(n).getAll()}function c(n,e){return i(n).find(e)}function l(n){return{url:n.url,name:n.name,add:function(n){return h(n),i(this).create(n),n}}}function p(n){var e={};return{getAll:function(){return _.map(e)},create:function(n){h(n);var t=n.id;e[JSON.stringify(t)]=n},find:function(t){v(t);var r=e[JSON.stringify(t)];if(!r)throw new Error("No item found in "+n+" table with id of "+t);return r},"delete":function(t){v(t);var t=JSON.stringify(t),r=e[t];if(!r)throw new Error("No item found in "+n+" table with id of "+t+". So can't delete it.");return e[t]=null,r}}}function s(n){if(!_.isString(n.name))throw new Error("You must provide a name for the resource");if(NachoBackend.resources[n.name])throw new Error("A resource named "+n.name+" already exists. Please choose a different name.");if(!_.isString(n.url))throw new Error("You must provide a url for the "+n.name+" resource");var e=_.pluck(NachoBackend.resources,"url");if(_.find(e,function(e){return e===n.url}))throw new Error("The url "+n.url+" is already taken. Please change one")}function h(n){if(!n.id)throw new Error("The resource must have an id property.")}function v(n){if(!n)throw new Error("You must pass in an id to find a record")}function g(n){if(n=n||{},NachoBackend.backend=NachoBackend.backend||n.backend||{},!_.isFunction(NachoBackend.backend.whenGET))throw new Error("$httpBackend not detected. Either add it as an option when initializing, or set the attribute directly on NachoBackend via NachoBackend.backend = $httpBackend")}function d(n){var e=NachoBackend.db[n];if(!e)throw new Error("There doesnt appear to be a table called "+n)}window.NachoBackend={},NachoBackend.resources={},NachoBackend.db={},NachoBackend.resource=function(n){n=n||{},s(n);var e=l(n),t=p(n.name);return this.resources[n.name]=e,this.db[n.name]=t,e},NachoBackend.initialize=function(e){g(e),_.each(this.resources,function(e){n(e)})}}.call(this);