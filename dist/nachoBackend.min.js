(function(){function n(n,e,t){t=(t||0)-1;for(var r=n?n.length:0;++t<r;)if(n[t]===e)return t;return-1}function e(e,t){var r=typeof t;if(e=e.l,"boolean"==r||null==t)return e[t]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?t:y+t;return e=(e=e[r])&&e[u],"object"==r?e&&-1<n(e,t)?0:-1:e?0:-1}function t(n){var e=this.l,t=typeof n;if("boolean"==t||null==n)e[n]=!0;else{"number"!=t&&"string"!=t&&(t="object");var r="number"==t?n:y+n,e=e[t]||(e[t]={});"object"==t?(e[r]||(e[r]=[])).push(n):e[r]=!0}}function r(n){return n.charCodeAt(0)}function u(n,e){for(var t=n.m,r=e.m,u=-1,o=t.length;++u<o;){var i=t[u],a=r[u];if(i!==a){if(i>a||"undefined"==typeof i)return 1;if(a>i||"undefined"==typeof a)return-1}}return n.n-e.n}function o(n){var e=-1,r=n.length,u=n[0],o=n[r/2|0],i=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&i&&"object"==typeof i)return!1;for(u=f(),u["false"]=u["null"]=u["true"]=u.undefined=!1,o=f(),o.k=n,o.l=u,o.push=t;++e<r;)o.push(n[e]);return o}function i(n){return"\\"+Y[n]}function a(){return v.pop()||[]}function f(){return g.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function c(n){n.length=0,v.length<b&&v.push(n)}function l(n){var e=n.l;e&&l(e),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,g.length<b&&g.push(n)}function p(n,e,t){e||(e=0),"undefined"==typeof t&&(t=n?n.length:0);var r=-1;t=t-e||0;for(var u=Array(0>t?0:t);++r<t;)u[r]=n[e+r];return u}function s(t){function v(n,e,t){if(!n||!G[typeof n])return n;e=e&&"undefined"==typeof t?e:ee(e,t,3);for(var r=-1,u=G[typeof n]&&Pt(n),o=u?u.length:0;++r<o&&(t=u[r],!1!==e(n[t],t,n)););return n}function g(n,e,t){var r;if(!n||!G[typeof n])return n;e=e&&"undefined"==typeof t?e:ee(e,t,3);for(r in n)if(!1===e(n[r],r,n))break;return n}function b(n,e,t){var r,u=n,o=u;if(!u)return o;for(var i=arguments,a=0,f="number"==typeof t?2:i.length;++a<f;)if((u=i[a])&&G[typeof u])for(var c=-1,l=G[typeof u]&&Pt(u),p=l?l.length:0;++c<p;)r=l[c],"undefined"==typeof o[r]&&(o[r]=u[r]);return o}function Y(n,e,t){var r,u=n,o=u;if(!u)return o;var i=arguments,a=0,f="number"==typeof t?2:i.length;if(f>3&&"function"==typeof i[f-2])var c=ee(i[--f-1],i[f--],2);else f>2&&"function"==typeof i[f-1]&&(c=i[--f]);for(;++a<f;)if((u=i[a])&&G[typeof u])for(var l=-1,p=G[typeof u]&&Pt(u),s=p?p.length:0;++l<s;)r=p[l],o[r]=c?c(o[r],u[r]):u[r];return o}function U(n){var e,t=[];if(!n||!G[typeof n])return t;for(e in n)yt.call(n,e)&&t.push(e);return t}function M(n){return n&&"object"==typeof n&&!Ft(n)&&yt.call(n,"__wrapped__")?n:new V(n)}function V(n,e){this.__chain__=!!e,this.__wrapped__=n}function Q(n){function e(){if(r){var n=p(r);mt.apply(n,arguments)}if(this instanceof e){var o=ne(t.prototype),n=t.apply(o,n||arguments);return we(n)?n:o}return t.apply(u,n||arguments)}var t=n[0],r=n[2],u=n[4];return Dt(e,n),e}function Z(n,e,t,r,u){if(t){var o=t(n);if("undefined"!=typeof o)return o}if(!we(n))return n;var i=lt.call(n);if(!J[i])return n;var f=At[i];switch(i){case F:case P:return new f(+n);case $:case q:return new f(n);case z:return o=f(n.source,E.exec(n)),o.lastIndex=n.lastIndex,o}if(i=Ft(n),e){var l=!r;r||(r=a()),u||(u=a());for(var s=r.length;s--;)if(r[s]==n)return u[s];o=i?f(n.length):{}}else o=i?p(n):Y({},n);return i&&(yt.call(n,"index")&&(o.index=n.index),yt.call(n,"input")&&(o.input=n.input)),e?(r.push(n),u.push(o),(i?Be:v)(n,function(n,i){o[i]=Z(n,e,t,r,u)}),l&&(c(r),c(u)),o):o}function ne(n){return we(n)?jt(n):{}}function ee(n,e,t){if("function"!=typeof n)return Ye;if("undefined"==typeof e||!("prototype"in n))return n;var r=n.__bindData__;if("undefined"==typeof r&&(It.funcNames&&(r=!n.name),r=r||!It.funcDecomp,!r)){var u=gt.call(n);It.funcNames||(r=!x.test(u)),r||(r=S.test(u),Dt(n,r))}if(!1===r||!0!==r&&1&r[1])return n;switch(t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,r){return n.call(e,t,r)};case 3:return function(t,r,u){return n.call(e,t,r,u)};case 4:return function(t,r,u,o){return n.call(e,t,r,u,o)}}return We(n,e)}function te(n){function e(){var n=f?i:this;if(u){var v=p(u);mt.apply(v,arguments)}return(o||l)&&(v||(v=p(arguments)),o&&mt.apply(v,o),l&&v.length<a)?(r|=16,te([t,s?r:-4&r,v,null,i,a])):(v||(v=arguments),c&&(t=n[h]),this instanceof e?(n=ne(t.prototype),v=t.apply(n,v),we(v)?v:n):t.apply(n,v))}var t=n[0],r=n[1],u=n[2],o=n[3],i=n[4],a=n[5],f=1&r,c=2&r,l=4&r,s=8&r,h=t;return Dt(e,n),e}function re(t,r){var u=-1,i=se(),a=t?t.length:0,f=a>=m&&i===n,c=[];if(f){var p=o(r);p?(i=e,r=p):f=!1}for(;++u<a;)p=t[u],0>i(r,p)&&c.push(p);return f&&l(r),c}function ue(n,e,t,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){var i=n[r];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Ft(i)||de(i))){e||(i=ue(i,e,t));var a=-1,f=i.length,c=o.length;for(o.length+=f;++a<f;)o[c++]=i[a]}else t||o.push(i)}return o}function oe(n,e,t,r,u,o){if(t){var i=t(n,e);if("undefined"!=typeof i)return!!i}if(n===e)return 0!==n||1/n==1/e;if(n===n&&!(n&&G[typeof n]||e&&G[typeof e]))return!1;if(null==n||null==e)return n===e;var f=lt.call(n),l=lt.call(e);if(f==I&&(f=K),l==I&&(l=K),f!=l)return!1;switch(f){case F:case P:return+n==+e;case $:return n!=+n?e!=+e:0==n?1/n==1/e:n==+e;case z:case q:return n==ot(e)}if(l=f==D,!l){var p=yt.call(n,"__wrapped__"),s=yt.call(e,"__wrapped__");if(p||s)return oe(p?n.__wrapped__:n,s?e.__wrapped__:e,t,r,u,o);if(f!=K)return!1;if(f=n.constructor,p=e.constructor,f!=p&&!(_e(f)&&f instanceof f&&_e(p)&&p instanceof p)&&"constructor"in n&&"constructor"in e)return!1}for(f=!u,u||(u=a()),o||(o=a()),p=u.length;p--;)if(u[p]==n)return o[p]==e;var h=0,i=!0;if(u.push(n),o.push(e),l){if(p=n.length,h=e.length,(i=h==p)||r)for(;h--;)if(l=p,s=e[h],r)for(;l--&&!(i=oe(n[l],s,t,r,u,o)););else if(!(i=oe(n[h],s,t,r,u,o)))break}else g(e,function(e,a,f){return yt.call(f,a)?(h++,i=yt.call(n,a)&&oe(n[a],e,t,r,u,o)):void 0}),i&&!r&&g(n,function(n,e,t){return yt.call(t,e)?i=-1<--h:void 0});return u.pop(),o.pop(),f&&(c(u),c(o)),i}function ie(n,e,t,r,u){(Ft(e)?Be:v)(e,function(e,o){var i,a,f=e,c=n[o];if(e&&((a=Ft(e))||qt(e))){for(f=r.length;f--;)if(i=r[f]==e){c=u[f];break}if(!i){var l;t&&(f=t(c,e),l="undefined"!=typeof f)&&(c=f),l||(c=a?Ft(c)?c:[]:qt(c)?c:{}),r.push(e),u.push(c),l||ie(c,e,t,r,u)}}else t&&(f=t(c,e),"undefined"==typeof f&&(f=e)),"undefined"!=typeof f&&(c=f);n[o]=c})}function ae(n,e){return n+vt(Tt()*(e-n+1))}function fe(t,r,u){var i=-1,f=se(),p=t?t.length:0,s=[],h=!r&&p>=m&&f===n,v=u||h?a():s;for(h&&(v=o(v),f=e);++i<p;){var g=t[i],d=u?u(g,i,t):g;(r?!i||v[v.length-1]!==d:0>f(v,d))&&((u||h)&&v.push(d),s.push(g))}return h?(c(v.k),l(v)):u&&c(v),s}function ce(n){return function(e,t,r){var u={};t=M.createCallback(t,r,3),r=-1;var o=e?e.length:0;if("number"==typeof o)for(;++r<o;){var i=e[r];n(u,i,t(i,r,e),e)}else v(e,function(e,r,o){n(u,e,t(e,r,o),o)});return u}}function le(n,e,t,r,u,o){var i=1&e,a=4&e,f=16&e,c=32&e;if(!(2&e||_e(n)))throw new it;f&&!t.length&&(e&=-17,f=t=!1),c&&!r.length&&(e&=-33,c=r=!1);var l=n&&n.__bindData__;return l&&!0!==l?(l=p(l),l[2]&&(l[2]=p(l[2])),l[3]&&(l[3]=p(l[3])),!i||1&l[1]||(l[4]=u),!i&&1&l[1]&&(e|=8),!a||4&l[1]||(l[5]=o),f&&mt.apply(l[2]||(l[2]=[]),t),c&&wt.apply(l[3]||(l[3]=[]),r),l[1]|=e,le.apply(null,l)):(1==e||17===e?Q:te)([n,e,t,r,u,o])}function pe(n){return Rt[n]}function se(){var e=(e=M.indexOf)===$e?n:e;return e}function he(n){return"function"==typeof n&&pt.test(n)}function ve(n){var e,t;return n&&lt.call(n)==K&&(e=n.constructor,!_e(e)||e instanceof e)?(g(n,function(n,e){t=e}),"undefined"==typeof t||yt.call(n,t)):!1}function ge(n){return $t[n]}function de(n){return n&&"object"==typeof n&&"number"==typeof n.length&&lt.call(n)==I||!1}function ye(n,e,t){var r=Pt(n),u=r.length;for(e=ee(e,t,3);u--&&(t=r[u],!1!==e(n[t],t,n)););return n}function me(n){var e=[];return g(n,function(n,t){_e(n)&&e.push(t)}),e.sort()}function be(n){for(var e=-1,t=Pt(n),r=t.length,u={};++e<r;){var o=t[e];u[n[o]]=o}return u}function _e(n){return"function"==typeof n}function we(n){return!(!n||!G[typeof n])}function ke(n){return"number"==typeof n||n&&"object"==typeof n&&lt.call(n)==$||!1}function je(n){return"string"==typeof n||n&&"object"==typeof n&&lt.call(n)==q||!1}function Ne(n){for(var e=-1,t=Pt(n),r=t.length,u=Qe(r);++e<r;)u[e]=n[t[e]];return u}function Ee(n,e,t){var r=-1,u=se(),o=n?n.length:0,i=!1;return t=(0>t?Ot(0,o+t):t)||0,Ft(n)?i=-1<u(n,e,t):"number"==typeof o?i=-1<(je(n)?n.indexOf(e,t):u(n,e,t)):v(n,function(n){return++r<t?void 0:!(i=n===e)}),i}function xe(n,e,t){var r=!0;e=M.createCallback(e,t,3),t=-1;var u=n?n.length:0;if("number"==typeof u)for(;++t<u&&(r=!!e(n[t],t,n)););else v(n,function(n,t,u){return r=!!e(n,t,u)});return r}function Ce(n,e,t){var r=[];e=M.createCallback(e,t,3),t=-1;var u=n?n.length:0;if("number"==typeof u)for(;++t<u;){var o=n[t];e(o,t,n)&&r.push(o)}else v(n,function(n,t,u){e(n,t,u)&&r.push(n)});return r}function Oe(n,e,t){e=M.createCallback(e,t,3),t=-1;var r=n?n.length:0;if("number"!=typeof r){var u;return v(n,function(n,t,r){return e(n,t,r)?(u=n,!1):void 0}),u}for(;++t<r;){var o=n[t];if(e(o,t,n))return o}}function Be(n,e,t){var r=-1,u=n?n.length:0;if(e=e&&"undefined"==typeof t?e:ee(e,t,3),"number"==typeof u)for(;++r<u&&!1!==e(n[r],r,n););else v(n,e);return n}function Se(n,e,t){var r=n?n.length:0;if(e=e&&"undefined"==typeof t?e:ee(e,t,3),"number"==typeof r)for(;r--&&!1!==e(n[r],r,n););else{var u=Pt(n),r=u.length;v(n,function(n,t,o){return t=u?u[--r]:--r,e(o[t],t,o)})}return n}function Te(n,e,t){var r=-1,u=n?n.length:0;if(e=M.createCallback(e,t,3),"number"==typeof u)for(var o=Qe(u);++r<u;)o[r]=e(n[r],r,n);else o=[],v(n,function(n,t,u){o[++r]=e(n,t,u)});return o}function Ae(n,e,t){var u=-1/0,o=u;if("function"!=typeof e&&t&&t[e]===n&&(e=null),null==e&&Ft(n)){t=-1;for(var i=n.length;++t<i;){var a=n[t];a>o&&(o=a)}}else e=null==e&&je(n)?r:M.createCallback(e,t,3),Be(n,function(n,t,r){t=e(n,t,r),t>u&&(u=t,o=n)});return o}function Ie(n,e,t,r){if(!n)return t;var u=3>arguments.length;e=M.createCallback(e,r,4);var o=-1,i=n.length;if("number"==typeof i)for(u&&(t=n[++o]);++o<i;)t=e(t,n[o],o,n);else v(n,function(n,r,o){t=u?(u=!1,n):e(t,n,r,o)});return t}function De(n,e,t,r){var u=3>arguments.length;return e=M.createCallback(e,r,4),Se(n,function(n,r,o){t=u?(u=!1,n):e(t,n,r,o)}),t}function Fe(n){var e=-1,t=n?n.length:0,r=Qe("number"==typeof t?t:0);return Be(n,function(n){var t=ae(0,++e);r[e]=r[t],r[t]=n}),r}function Pe(n,e,t){var r;e=M.createCallback(e,t,3),t=-1;var u=n?n.length:0;if("number"==typeof u)for(;++t<u&&!(r=e(n[t],t,n)););else v(n,function(n,t,u){return!(r=e(n,t,u))});return!!r}function Re(n,e,t){var r=0,u=n?n.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=M.createCallback(e,t,3);++o<u&&e(n[o],o,n);)r++}else if(r=e,null==r||t)return n?n[0]:h;return p(n,0,Bt(Ot(0,r),u))}function $e(e,t,r){if("number"==typeof r){var u=e?e.length:0;r=0>r?Ot(0,u+r):r||0}else if(r)return r=ze(e,t),e[r]===t?r:-1;return n(e,t,r)}function Ke(n,e,t){if("number"!=typeof e&&null!=e){var r=0,u=-1,o=n?n.length:0;for(e=M.createCallback(e,t,3);++u<o&&e(n[u],u,n);)r++}else r=null==e||t?1:Ot(0,e);return p(n,r)}function ze(n,e,t,r){var u=0,o=n?n.length:u;for(t=t?M.createCallback(t,r,1):Ye,e=t(e);o>u;)r=u+o>>>1,t(n[r])<e?u=r+1:o=r;return u}function qe(n,e,t,r){return"boolean"!=typeof e&&null!=e&&(r=t,t="function"!=typeof e&&r&&r[e]===n?null:e,e=!1),null!=t&&(t=M.createCallback(t,r,3)),fe(n,e,t)}function Je(){for(var n=1<arguments.length?arguments:arguments[0],e=-1,t=n?Ae(Gt(n,"length")):0,r=Qe(0>t?0:t);++e<t;)r[e]=Gt(n,e);return r}function Le(n,e){var t=-1,r=n?n.length:0,u={};for(e||!r||Ft(n[0])||(e=[]);++t<r;){var o=n[t];e?u[o]=e[t]:o&&(u[o[0]]=o[1])}return u}function We(n,e){return 2<arguments.length?le(n,17,p(arguments,2),null,e):le(n,1,null,null,e)}function Ge(n,e,t){function r(){l&&ht(l),i=l=p=h,(g||v!==e)&&(s=Yt(),a=n.apply(c,o),l||i||(o=c=null))}function u(){var t=e-(Yt()-f);t>0?l=bt(u,t):(i&&ht(i),t=p,i=l=p=h,t&&(s=Yt(),a=n.apply(c,o),l||i||(o=c=null)))}var o,i,a,f,c,l,p,s=0,v=!1,g=!0;if(!_e(n))throw new it;if(e=Ot(0,e)||0,!0===t)var d=!0,g=!1;else we(t)&&(d=t.leading,v="maxWait"in t&&(Ot(e,t.maxWait)||0),g="trailing"in t?t.trailing:g);return function(){if(o=arguments,f=Yt(),c=this,p=g&&(l||!d),!1===v)var t=d&&!l;else{i||d||(s=f);var h=v-(f-s),y=0>=h;y?(i&&(i=ht(i)),s=f,a=n.apply(c,o)):i||(i=bt(r,h))}return y&&l?l=ht(l):l||e===v||(l=bt(u,e)),t&&(y=!0,a=n.apply(c,o)),!y||l||i||(o=c=null),a}}function Ye(n){return n}function He(n,e,t){var r=!0,u=e&&me(e);e&&(t||u.length)||(null==t&&(t=e),o=V,e=n,n=M,u=me(e)),!1===t?r=!1:we(t)&&"chain"in t&&(r=t.chain);var o=n,i=_e(o);Be(u,function(t){var u=n[t]=e[t];i&&(o.prototype[t]=function(){var e=this.__chain__,t=this.__wrapped__,i=[t];if(mt.apply(i,arguments),i=u.apply(n,i),r||e){if(t===i&&we(i))return this;i=new o(i),i.__chain__=e}return i})})}function Ue(){}function Me(n){return function(e){return e[n]}}function Ve(){return this.__wrapped__}t=t?X.defaults(H.Object(),t,X.pick(H,A)):H;var Qe=t.Array,Xe=t.Boolean,Ze=t.Date,nt=t.Function,et=t.Math,tt=t.Number,rt=t.Object,ut=t.RegExp,ot=t.String,it=t.TypeError,at=[],ft=rt.prototype,ct=t._,lt=ft.toString,pt=ut("^"+ot(lt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),st=et.ceil,ht=t.clearTimeout,vt=et.floor,gt=nt.prototype.toString,dt=he(dt=rt.getPrototypeOf)&&dt,yt=ft.hasOwnProperty,mt=at.push,bt=t.setTimeout,_t=at.splice,wt=at.unshift,kt=function(){try{var n={},e=he(e=rt.defineProperty)&&e,t=e(n,n,n)&&e}catch(r){}return t}(),jt=he(jt=rt.create)&&jt,Nt=he(Nt=Qe.isArray)&&Nt,Et=t.isFinite,xt=t.isNaN,Ct=he(Ct=rt.keys)&&Ct,Ot=et.max,Bt=et.min,St=t.parseInt,Tt=et.random,At={};At[D]=Qe,At[F]=Xe,At[P]=Ze,At[R]=nt,At[K]=rt,At[$]=tt,At[z]=ut,At[q]=ot,V.prototype=M.prototype;var It=M.support={};It.funcDecomp=!he(t.a)&&S.test(s),It.funcNames="string"==typeof nt.name,M.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:C,variable:"",imports:{_:M}},jt||(ne=function(){function n(){}return function(e){if(we(e)){n.prototype=e;var r=new n;n.prototype=null}return r||t.Object()}}());var Dt=kt?function(n,e){W.value=e,kt(n,"__bindData__",W)}:Ue,Ft=Nt||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&lt.call(n)==D||!1},Pt=Ct?function(n){return we(n)?Ct(n):[]}:U,Rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$t=be(Rt),Kt=ut("("+Pt($t).join("|")+")","g"),zt=ut("["+Pt(Rt).join("")+"]","g"),qt=dt?function(n){if(!n||lt.call(n)!=K)return!1;var e=n.valueOf,t=he(e)&&(t=dt(e))&&dt(t);return t?n==t||dt(n)==t:ve(n)}:ve,Jt=ce(function(n,e,t){yt.call(n,t)?n[t]++:n[t]=1}),Lt=ce(function(n,e,t){(yt.call(n,t)?n[t]:n[t]=[]).push(e)}),Wt=ce(function(n,e,t){n[t]=e}),Gt=Te,Yt=he(Yt=Ze.now)&&Yt||function(){return(new Ze).getTime()},Ht=8==St(_+"08")?St:function(n,e){return St(je(n)?n.replace(O,""):n,e||0)};return M.after=function(n,e){if(!_e(e))throw new it;return function(){return 1>--n?e.apply(this,arguments):void 0}},M.assign=Y,M.at=function(n){for(var e=arguments,t=-1,r=ue(e,!0,!1,1),e=e[2]&&e[2][e[1]]===n?1:r.length,u=Qe(e);++t<e;)u[t]=n[r[t]];return u},M.bind=We,M.bindAll=function(n){for(var e=1<arguments.length?ue(arguments,!0,!1,1):me(n),t=-1,r=e.length;++t<r;){var u=e[t];n[u]=le(n[u],1,null,null,n)}return n},M.bindKey=function(n,e){return 2<arguments.length?le(e,19,p(arguments,2),null,n):le(e,3,null,null,n)},M.chain=function(n){return n=new V(n),n.__chain__=!0,n},M.compact=function(n){for(var e=-1,t=n?n.length:0,r=[];++e<t;){var u=n[e];u&&r.push(u)}return r},M.compose=function(){for(var n=arguments,e=n.length;e--;)if(!_e(n[e]))throw new it;return function(){for(var e=arguments,t=n.length;t--;)e=[n[t].apply(this,e)];return e[0]}},M.constant=function(n){return function(){return n}},M.countBy=Jt,M.create=function(n,e){var t=ne(n);return e?Y(t,e):t},M.createCallback=function(n,e,t){var r=typeof n;if(null==n||"function"==r)return ee(n,e,t);if("object"!=r)return Me(n);var u=Pt(n),o=u[0],i=n[o];return 1!=u.length||i!==i||we(i)?function(e){for(var t=u.length,r=!1;t--&&(r=oe(e[u[t]],n[u[t]],null,!0)););return r}:function(n){return n=n[o],i===n&&(0!==i||1/i==1/n)}},M.curry=function(n,e){return e="number"==typeof e?e:+e||n.length,le(n,4,null,null,null,e)},M.debounce=Ge,M.defaults=b,M.defer=function(n){if(!_e(n))throw new it;var e=p(arguments,1);return bt(function(){n.apply(h,e)},1)},M.delay=function(n,e){if(!_e(n))throw new it;var t=p(arguments,2);return bt(function(){n.apply(h,t)},e)},M.difference=function(n){return re(n,ue(arguments,!0,!0,1))},M.filter=Ce,M.flatten=function(n,e,t,r){return"boolean"!=typeof e&&null!=e&&(r=t,t="function"!=typeof e&&r&&r[e]===n?null:e,e=!1),null!=t&&(n=Te(n,t,r)),ue(n,e)},M.forEach=Be,M.forEachRight=Se,M.forIn=g,M.forInRight=function(n,e,t){var r=[];g(n,function(n,e){r.push(e,n)});var u=r.length;for(e=ee(e,t,3);u--&&!1!==e(r[u--],r[u],n););return n},M.forOwn=v,M.forOwnRight=ye,M.functions=me,M.groupBy=Lt,M.indexBy=Wt,M.initial=function(n,e,t){var r=0,u=n?n.length:0;if("number"!=typeof e&&null!=e){var o=u;for(e=M.createCallback(e,t,3);o--&&e(n[o],o,n);)r++}else r=null==e||t?1:e||r;return p(n,0,Bt(Ot(0,u-r),u))},M.intersection=function(){for(var t=[],r=-1,u=arguments.length,i=a(),f=se(),p=f===n,s=a();++r<u;){var h=arguments[r];(Ft(h)||de(h))&&(t.push(h),i.push(p&&h.length>=m&&o(r?t[r]:s)))}var p=t[0],v=-1,g=p?p.length:0,d=[];n:for(;++v<g;){var y=i[0],h=p[v];if(0>(y?e(y,h):f(s,h))){for(r=u,(y||s).push(h);--r;)if(y=i[r],0>(y?e(y,h):f(t[r],h)))continue n;d.push(h)}}for(;u--;)(y=i[u])&&l(y);return c(i),c(s),d},M.invert=be,M.invoke=function(n,e){var t=p(arguments,2),r=-1,u="function"==typeof e,o=n?n.length:0,i=Qe("number"==typeof o?o:0);return Be(n,function(n){i[++r]=(u?e:n[e]).apply(n,t)}),i},M.keys=Pt,M.map=Te,M.mapValues=function(n,e,t){var r={};return e=M.createCallback(e,t,3),v(n,function(n,t,u){r[t]=e(n,t,u)}),r},M.max=Ae,M.memoize=function(n,e){function t(){var r=t.cache,u=e?e.apply(this,arguments):y+arguments[0];return yt.call(r,u)?r[u]:r[u]=n.apply(this,arguments)}if(!_e(n))throw new it;return t.cache={},t},M.merge=function(n){var e=arguments,t=2;if(!we(n))return n;if("number"!=typeof e[2]&&(t=e.length),t>3&&"function"==typeof e[t-2])var r=ee(e[--t-1],e[t--],2);else t>2&&"function"==typeof e[t-1]&&(r=e[--t]);for(var e=p(arguments,1,t),u=-1,o=a(),i=a();++u<t;)ie(n,e[u],r,o,i);return c(o),c(i),n},M.min=function(n,e,t){var u=1/0,o=u;if("function"!=typeof e&&t&&t[e]===n&&(e=null),null==e&&Ft(n)){t=-1;for(var i=n.length;++t<i;){var a=n[t];o>a&&(o=a)}}else e=null==e&&je(n)?r:M.createCallback(e,t,3),Be(n,function(n,t,r){t=e(n,t,r),u>t&&(u=t,o=n)});return o},M.omit=function(n,e,t){var r={};if("function"!=typeof e){var u=[];g(n,function(n,e){u.push(e)});for(var u=re(u,ue(arguments,!0,!1,1)),o=-1,i=u.length;++o<i;){var a=u[o];r[a]=n[a]}}else e=M.createCallback(e,t,3),g(n,function(n,t,u){e(n,t,u)||(r[t]=n)});return r},M.once=function(n){var e,t;if(!_e(n))throw new it;return function(){return e?t:(e=!0,t=n.apply(this,arguments),n=null,t)}},M.pairs=function(n){for(var e=-1,t=Pt(n),r=t.length,u=Qe(r);++e<r;){var o=t[e];u[e]=[o,n[o]]}return u},M.partial=function(n){return le(n,16,p(arguments,1))},M.partialRight=function(n){return le(n,32,null,p(arguments,1))},M.pick=function(n,e,t){var r={};if("function"!=typeof e)for(var u=-1,o=ue(arguments,!0,!1,1),i=we(n)?o.length:0;++u<i;){var a=o[u];a in n&&(r[a]=n[a])}else e=M.createCallback(e,t,3),g(n,function(n,t,u){e(n,t,u)&&(r[t]=n)});return r},M.pluck=Gt,M.property=Me,M.pull=function(n){for(var e=arguments,t=0,r=e.length,u=n?n.length:0;++t<r;)for(var o=-1,i=e[t];++o<u;)n[o]===i&&(_t.call(n,o--,1),u--);return n},M.range=function(n,e,t){n=+n||0,t="number"==typeof t?t:+t||1,null==e&&(e=n,n=0);var r=-1;e=Ot(0,st((e-n)/(t||1)));for(var u=Qe(e);++r<e;)u[r]=n,n+=t;return u},M.reject=function(n,e,t){return e=M.createCallback(e,t,3),Ce(n,function(n,t,r){return!e(n,t,r)})},M.remove=function(n,e,t){var r=-1,u=n?n.length:0,o=[];for(e=M.createCallback(e,t,3);++r<u;)t=n[r],e(t,r,n)&&(o.push(t),_t.call(n,r--,1),u--);return o},M.rest=Ke,M.shuffle=Fe,M.sortBy=function(n,e,t){var r=-1,o=Ft(e),i=n?n.length:0,p=Qe("number"==typeof i?i:0);for(o||(e=M.createCallback(e,t,3)),Be(n,function(n,t,u){var i=p[++r]=f();o?i.m=Te(e,function(e){return n[e]}):(i.m=a())[0]=e(n,t,u),i.n=r,i.o=n}),i=p.length,p.sort(u);i--;)n=p[i],p[i]=n.o,o||c(n.m),l(n);return p},M.tap=function(n,e){return e(n),n},M.throttle=function(n,e,t){var r=!0,u=!0;if(!_e(n))throw new it;return!1===t?r=!1:we(t)&&(r="leading"in t?t.leading:r,u="trailing"in t?t.trailing:u),L.leading=r,L.maxWait=e,L.trailing=u,Ge(n,e,L)},M.times=function(n,e,t){n=-1<(n=+n)?n:0;var r=-1,u=Qe(n);for(e=ee(e,t,1);++r<n;)u[r]=e(r);return u},M.toArray=function(n){return n&&"number"==typeof n.length?p(n):Ne(n)},M.transform=function(n,e,t,r){var u=Ft(n);if(null==t)if(u)t=[];else{var o=n&&n.constructor;t=ne(o&&o.prototype)}return e&&(e=M.createCallback(e,r,4),(u?Be:v)(n,function(n,r,u){return e(t,n,r,u)})),t},M.union=function(){return fe(ue(arguments,!0,!0))},M.uniq=qe,M.values=Ne,M.where=Ce,M.without=function(n){return re(n,p(arguments,1))},M.wrap=function(n,e){return le(e,16,[n])},M.xor=function(){for(var n=-1,e=arguments.length;++n<e;){var t=arguments[n];if(Ft(t)||de(t))var r=r?fe(re(r,t).concat(re(t,r))):t}return r||[]},M.zip=Je,M.zipObject=Le,M.collect=Te,M.drop=Ke,M.each=Be,M.eachRight=Se,M.extend=Y,M.methods=me,M.object=Le,M.select=Ce,M.tail=Ke,M.unique=qe,M.unzip=Je,He(M),M.clone=function(n,e,t,r){return"boolean"!=typeof e&&null!=e&&(r=t,t=e,e=!1),Z(n,e,"function"==typeof t&&ee(t,r,1))},M.cloneDeep=function(n,e,t){return Z(n,!0,"function"==typeof e&&ee(e,t,1))},M.contains=Ee,M.escape=function(n){return null==n?"":ot(n).replace(zt,pe)},M.every=xe,M.find=Oe,M.findIndex=function(n,e,t){var r=-1,u=n?n.length:0;for(e=M.createCallback(e,t,3);++r<u;)if(e(n[r],r,n))return r;return-1},M.findKey=function(n,e,t){var r;return e=M.createCallback(e,t,3),v(n,function(n,t,u){return e(n,t,u)?(r=t,!1):void 0}),r},M.findLast=function(n,e,t){var r;return e=M.createCallback(e,t,3),Se(n,function(n,t,u){return e(n,t,u)?(r=n,!1):void 0}),r},M.findLastIndex=function(n,e,t){var r=n?n.length:0;for(e=M.createCallback(e,t,3);r--;)if(e(n[r],r,n))return r;return-1},M.findLastKey=function(n,e,t){var r;return e=M.createCallback(e,t,3),ye(n,function(n,t,u){return e(n,t,u)?(r=t,!1):void 0}),r},M.has=function(n,e){return n?yt.call(n,e):!1},M.identity=Ye,M.indexOf=$e,M.isArguments=de,M.isArray=Ft,M.isBoolean=function(n){return!0===n||!1===n||n&&"object"==typeof n&&lt.call(n)==F||!1},M.isDate=function(n){return n&&"object"==typeof n&&lt.call(n)==P||!1},M.isElement=function(n){return n&&1===n.nodeType||!1},M.isEmpty=function(n){var e=!0;if(!n)return e;var t=lt.call(n),r=n.length;return t==D||t==q||t==I||t==K&&"number"==typeof r&&_e(n.splice)?!r:(v(n,function(){return e=!1}),e)},M.isEqual=function(n,e,t,r){return oe(n,e,"function"==typeof t&&ee(t,r,2))},M.isFinite=function(n){return Et(n)&&!xt(parseFloat(n))},M.isFunction=_e,M.isNaN=function(n){return ke(n)&&n!=+n},M.isNull=function(n){return null===n},M.isNumber=ke,M.isObject=we,M.isPlainObject=qt,M.isRegExp=function(n){return n&&"object"==typeof n&&lt.call(n)==z||!1},M.isString=je,M.isUndefined=function(n){return"undefined"==typeof n},M.lastIndexOf=function(n,e,t){var r=n?n.length:0;for("number"==typeof t&&(r=(0>t?Ot(0,r+t):Bt(t,r-1))+1);r--;)if(n[r]===e)return r;return-1},M.mixin=He,M.noConflict=function(){return t._=ct,this},M.noop=Ue,M.now=Yt,M.parseInt=Ht,M.random=function(n,e,t){var r=null==n,u=null==e;return null==t&&("boolean"==typeof n&&u?(t=n,n=1):u||"boolean"!=typeof e||(t=e,u=!0)),r&&u&&(e=1),n=+n||0,u?(e=n,n=0):e=+e||0,t||n%1||e%1?(t=Tt(),Bt(n+t*(e-n+parseFloat("1e-"+((t+"").length-1))),e)):ae(n,e)},M.reduce=Ie,M.reduceRight=De,M.result=function(n,e){if(n){var t=n[e];return _e(t)?n[e]():t}},M.runInContext=s,M.size=function(n){var e=n?n.length:0;return"number"==typeof e?e:Pt(n).length},M.some=Pe,M.sortedIndex=ze,M.template=function(n,e,t){var r=M.templateSettings;n=ot(n||""),t=b({},t,r);var u,o=b({},t.imports,r.imports),r=Pt(o),o=Ne(o),a=0,f=t.interpolate||B,c="__p+='",f=ut((t.escape||B).source+"|"+f.source+"|"+(f===C?N:B).source+"|"+(t.evaluate||B).source+"|$","g");n.replace(f,function(e,t,r,o,f,l){return r||(r=o),c+=n.slice(a,l).replace(T,i),t&&(c+="'+__e("+t+")+'"),f&&(u=!0,c+="';"+f+";\n__p+='"),r&&(c+="'+((__t=("+r+"))==null?'':__t)+'"),a=l+e.length,e}),c+="';",f=t=t.variable,f||(t="obj",c="with("+t+"){"+c+"}"),c=(u?c.replace(w,""):c).replace(k,"$1").replace(j,"$1;"),c="function("+t+"){"+(f?"":t+"||("+t+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}";try{var l=nt(r,"return "+c).apply(h,o)}catch(p){throw p.source=c,p}return e?l(e):(l.source=c,l)},M.unescape=function(n){return null==n?"":ot(n).replace(Kt,ge)},M.uniqueId=function(n){var e=++d;return ot(null==n?"":n)+e},M.all=xe,M.any=Pe,M.detect=Oe,M.findWhere=Oe,M.foldl=Ie,M.foldr=De,M.include=Ee,M.inject=Ie,He(function(){var n={};return v(M,function(e,t){M.prototype[t]||(n[t]=e)}),n}(),!1),M.first=Re,M.last=function(n,e,t){var r=0,u=n?n.length:0;if("number"!=typeof e&&null!=e){var o=u;for(e=M.createCallback(e,t,3);o--&&e(n[o],o,n);)r++}else if(r=e,null==r||t)return n?n[u-1]:h;return p(n,Ot(0,u-r))},M.sample=function(n,e,t){return n&&"number"!=typeof n.length&&(n=Ne(n)),null==e||t?n?n[ae(0,n.length-1)]:h:(n=Fe(n),n.length=Bt(Ot(0,e),n.length),n)},M.take=Re,M.head=Re,v(M,function(n,e){var t="sample"!==e;M.prototype[e]||(M.prototype[e]=function(e,r){var u=this.__chain__,o=n(this.__wrapped__,e,r);return u||null!=e&&(!r||t&&"function"==typeof e)?new V(o,u):o})}),M.VERSION="2.4.1",M.prototype.chain=function(){return this.__chain__=!0,this},M.prototype.toString=function(){return ot(this.__wrapped__)},M.prototype.value=Ve,M.prototype.valueOf=Ve,Be(["join","pop","shift"],function(n){var e=at[n];M.prototype[n]=function(){var n=this.__chain__,t=e.apply(this.__wrapped__,arguments);return n?new V(t,n):t}}),Be(["push","reverse","sort","unshift"],function(n){var e=at[n];M.prototype[n]=function(){return e.apply(this.__wrapped__,arguments),this}}),Be(["concat","slice","splice"],function(n){var e=at[n];M.prototype[n]=function(){return new V(e.apply(this.__wrapped__,arguments),this.__chain__)}}),M}var h,v=[],g=[],d=0,y=+new Date+"",m=75,b=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",w=/\b__p\+='';/g,k=/\b(__p\+=)''\+/g,j=/(__e\(.*?\)|\b__t\))\+'';/g,N=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,E=/\w*$/,x=/^\s*function[ \n\r\t]+\w/,C=/<%=([\s\S]+?)%>/g,O=RegExp("^["+_+"]*0+(?=.$)"),B=/($^)/,S=/\bthis\b/,T=/['\n\r\t\u2028\u2029\\]/g,A="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),I="[object Arguments]",D="[object Array]",F="[object Boolean]",P="[object Date]",R="[object Function]",$="[object Number]",K="[object Object]",z="[object RegExp]",q="[object String]",J={};J[R]=!1,J[I]=J[D]=J[F]=J[P]=J[$]=J[K]=J[z]=J[q]=!0;var L={leading:!1,maxWait:0,trailing:!1},W={configurable:!1,enumerable:!1,value:null,writable:!1},G={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},H=G[typeof window]&&window||this,U=G[typeof exports]&&exports&&!exports.nodeType&&exports,M=G[typeof module]&&module&&!module.nodeType&&module,V=M&&M.exports===U&&U,Q=G[typeof global]&&global;!Q||Q.global!==Q&&Q.window!==Q||(H=Q);var X=s();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(H._=X,define(function(){return X})):U&&M?V?(M.exports=X)._=X:U._=X:H._=X}).call(this),function(){"use strict";function n(n){e(n),a(n)}function e(n){NachoBackend.backend.whenGET(n.url).respond(function(){return[200,s(n),{},"OK"]})}function t(n,e){NachoBackend.backend.whenGET(n.url+"/"+e).respond(function(){return[200,h(n,e),{},"OK"]})}function r(n,e){NachoBackend.backend.whenPUT(n.url+"/"+e).respond(function(t,r,u){u=u||{};var o=h(n,e);return _.assign(o,JSON.parse(u)),[200,o,{},"OK"]})}function u(n){NachoBackend.backend.whenPOST(n.url).respond(function(e,t,r){r=r||{};var u=n.add(JSON.parse(r));return[200,u,{},"OK"]})}function o(n,e){NachoBackend.backend.whenDELETE(n.url+"/"+e).respond(function(t,r,u){u=u||{};var o=p(n).delete(e);return[200,o,{},"OK"]})}function i(){return[t,r,u,o]}function a(n){var e=s(n);_.each(e,function(e){f(n,e)})}function f(n,e){_.each(i(),function(t){t(n,e.id)})}function c(n){var e=n.resource.url+"/"+n.item.id+n.route;NachoBackend.backend.when(n.method,e).respond(function(e,t,r){return r=r||{},_.isFunction(n.callback)&&n.callback(r,n.item),[200,n.item,{},"OK"]})}function l(n){var e=n.resource.url+n.route;NachoBackend.backend.when(n.method,e).respond(function(e,t,r){r=r||{};var u=p(n.resource).getAll();return _.isFunction(n.callback)&&n.callback(r,u),[200,u,{},"OK"]})}function p(n){return w(n.name),NachoBackend.db[n.name]}function s(n){return p(n).getAll()}function h(n,e){return p(n).find(e)}function v(n){return n=n||{},n.url=this&&this.url?this.url+n.url:n.url,{url:n.url,name:n.name,add:function(n){return y(n),p(this).create(n),j&&f(this,n),n},resource:v,route:function(n){if(n=n||{},k(n),n.resource=this,n.onItem){var e=p(this).getAll();_.each(e,function(e){n.item=e,c(n)})}else l(n)}}}function g(n){var e={};return{getAll:function(){return _.map(e)},create:function(n){y(n);var t=n.id;e[JSON.stringify(t)]=n},find:function(t){m(t);var r=e[JSON.stringify(t)];if(!r)throw new Error("No item found in "+n+" table with id of "+t);return r},"delete":function(t){m(t);var t=JSON.stringify(t),r=e[t];if(!r)throw new Error("No item found in "+n+" table with id of "+t+". So can't delete it.");return e[t]=null,r}}}function d(n){if(!_.isString(n.name))throw new Error("You must provide a name for the resource");if(NachoBackend.resources[n.name])throw new Error("A resource named "+n.name+" already exists. Please choose a different name.");if(!_.isString(n.url))throw new Error("You must provide a url for the "+n.name+" resource");var e=_.pluck(NachoBackend.resources,"url");if(_.find(e,function(e){return e===n.url}))throw new Error("The url "+n.url+" is already taken. Please change one")}function y(n){if(!n.id)throw new Error("The resource must have an id property.")}function m(n){if(!n)throw new Error("You must pass in an id to find a record")}function b(n){if(n=n||{},NachoBackend.backend=NachoBackend.backend||n.backend||{},!_.isFunction(NachoBackend.backend.whenGET))throw new Error("$httpBackend not detected. Either add it as an option when initializing, or set the attribute directly on NachoBackend via NachoBackend.backend = $httpBackend")}function w(n){var e=NachoBackend.db[n];if(!e)throw new Error("There doesnt appear to be a table called "+n)}function k(n){var e=["GET","POST","PATCH","PUT","HEAD","DELETE"];if(!_.contains(e,n.method))throw new Error(n.method+" is not a valid HTTP method.");if(!_.isString(n.route))throw new Error("You must supply a route. eg: '/my_route' ")}window.NachoBackend={},NachoBackend.resources={},NachoBackend.db={};var j=!1;NachoBackend.resource=function(n){return n=n||{},d(n),this.db[n.name]=g(n.name),this.resources[n.name]=v(n)},NachoBackend.initialize=function(e){b(e),j=!0,_.each(this.resources,function(e){n(e)})}}.call(this);